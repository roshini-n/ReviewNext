import{A as o,B as p,C as O,D as f,E as C,F as r,K as a,L as v,M as s,O as h,P as l,y as g}from"./chunk-VRLREQ5H.js";import{a as d,b as c,ea as M,ka as u,s as m,y as b}from"./chunk-5JKIZQAZ.js";var D=class n{firestore=u(g);moviesCollection=f(this.firestore,"movies");constructor(){}getMovies(){return o(this.moviesCollection,{idField:"id"})}getMovieById(e){let i=r(this.moviesCollection,e);return p(i,{idField:"id"})}addMovie(e){let i=c(d({},e),{dateAdded:new Date().toISOString(),rating:0,totalRatingScore:0,numRatings:0,views:0});return m(O(this.moviesCollection,i).then(()=>{}))}updateMovie(e,i){let t=r(this.moviesCollection,e);return h(t,i)}deleteMovie(e){let i=r(this.moviesCollection,e);return C(i)}getTopRatedMovies(e=10){let i=s(this.moviesCollection,l("rating",">=",3.5),v("rating","desc"),a(e));return o(i,{idField:"id"})}getRecentlyAddedMovies(e=10){let i=s(this.moviesCollection,v("dateAdded","desc"),a(e));return o(i,{idField:"id"})}getMoviesByGenre(e){let i=s(this.moviesCollection,l("genres","array-contains",e));return o(i,{idField:"id"})}searchMovies(e){return this.getMovies().pipe(b(i=>i.filter(t=>t.title.toLowerCase().includes(e.toLowerCase())||t.director.toLowerCase().includes(e.toLowerCase()))))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})};export{D as a};
