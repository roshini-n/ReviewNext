<div class="login-container" [attr.data-theme]="currentTheme">
  <!-- Background Elements -->
  <div class="background-gradient"></div>

  <!-- Main Content -->
  <div class="login-content">
    <!-- Left Side - Branding -->
    <div class="branding-section">
      <div class="brand-logo">
        <h1>ReviewNext</h1>
      </div>
      <p class="brand-subtitle">Discover, Review, and Share Your Favorite Content</p>
      <div class="feature-highlights">
        <div class="feature-item">
          <mat-icon>rate_review</mat-icon>
          <span>Write Reviews</span>
        </div>
        <div class="feature-item">
          <mat-icon>visibility</mat-icon>
          <span>View Reviews</span>
        </div>
        <div class="feature-item">
          <mat-icon>favorite</mat-icon>
          <span>Track Favorites</span>
        </div>
      </div>
    </div>

    <!-- Right Side - Login Form -->
    <div class="form-section">
      <div class="form-container">
        <div class="form-header">
          <h2>Welcome Back</h2>
          <p>Sign in to continue your journey</p>
        </div>

        <form [formGroup]="form" (ngSubmit)="onSubmit()" class="login-form">
          <!-- Email Field -->
          <div class="form-group">
            <div class="input-wrapper">
              <mat-icon class="input-icon">email</mat-icon>
              <input
                type="email"
                id="email"
                formControlName="email"
                placeholder="Email address"
                [class.error]="form.get('email')?.invalid && form.get('email')?.touched"
              />
            </div>
            @if (form.get('email')?.invalid && form.get('email')?.touched) {
              <div class="error-text">Please enter a valid email address</div>
            }
          </div>

          <!-- Password Field -->
          <div class="form-group">
            <div class="input-wrapper">
              <mat-icon class="input-icon">lock</mat-icon>
              <input
                [type]="showPassword ? 'text' : 'password'"
                id="password"
                formControlName="password"
                placeholder="Password"
                [class.error]="form.get('password')?.invalid && form.get('password')?.touched"
              />
              <button type="button" class="toggle-password" (click)="togglePasswordVisibility()">
                <mat-icon>{{ showPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
              </button>
            </div>
            @if (form.get('password')?.invalid && form.get('password')?.touched) {
              <div class="error-text">Password must be at least 6 characters</div>
            }
          </div>

          <!-- Remember Me & Forgot Password -->
          <div class="form-options">
            <label class="remember-me">
              <input type="checkbox" />
              <span class="checkmark"></span>
              Remember me
            </label>
            <a routerLink="../reset_password" class="forgot-password">Forgot Password?</a>
          </div>

          <!-- Submit Button -->
          <button type="submit" class="login-button" [disabled]="form.invalid">
            <span>Sign In</span>
            <mat-icon>arrow_forward</mat-icon>
          </button>
        </form>

        <!-- Footer -->
        <div class="form-footer">
          <p class="register-link">
            Don't have an account? <a routerLink="../register">Register</a>
          </p>
        </div>

        <!-- Error Message Block -->
        @if (errorMessage) {
          <div class="error-messages">
            <mat-icon>error</mat-icon>
            <span>
              @if (errorMessage === "auth/invalid-email") {
                Invalid email address
              } @else if (errorMessage === "auth/missing-password") {
                Please enter your password
              } @else if (errorMessage === "auth/invalid-credential") {
                Invalid email or password
              } @else {
                {{ errorMessage }}
              }
            </span>
          </div>
        }
      </div>
    </div>
  </div>
</div>
